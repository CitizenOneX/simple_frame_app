_M={}function _M.parse_text_sprite_block(a,b)if string.byte(a,1)==0xFF then local c={}c.width=string.byte(a,2)<<8|string.byte(a,3)c.height=string.byte(a,4)<<8|string.byte(a,5)c.lines=string.byte(a,6)local d={}for e=0,c.lines-1 do local f={}f.x=string.byte(a,6+4*e+1)<<8|string.byte(a,6+4*e+2)f.y=string.byte(a,6+4*e+3)<<8|string.byte(a,6+4*e+4)table.insert(d,f)end;c.offsets=d;c.sprites={}return c else if b==nil then return nil end;local g={}g.width=string.byte(a,1)<<8|string.byte(a,2)g.height=string.byte(a,3)<<8|string.byte(a,4)g.bpp=string.byte(a,5)g.num_colors=string.byte(a,6)g.palette_data=string.sub(a,7,7+g.num_colors*3-1)g.pixel_data=string.sub(a,7+g.num_colors*3)table.insert(b.sprites,g)return b end end;return _M