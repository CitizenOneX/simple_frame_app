local _M={}function _M.parse_image_sprite_block(a,b)if string.byte(a,1)==0xFF then if b~=nil then for c,d in pairs(b.sprites)do b.sprites[c]=nil end;b=nil;collectgarbage('collect')end;local e={}e.width=string.byte(a,2)<<8|string.byte(a,3)e.height=string.byte(a,4)<<8|string.byte(a,5)e.sprite_line_height=string.byte(a,6)<<8|string.byte(a,7)e.progressive_render=string.byte(a,8)==1;e.updatable=string.byte(a,9)==1;e.sprites={}local f=e.height+e.sprite_line_height-1;e.total_sprites=f//e.sprite_line_height;e.active_sprites=0;e.current_sprite_index=0;return e else if b==nil then return nil end;b.current_sprite_index=b.current_sprite_index+1;if b.current_sprite_index>b.total_sprites then if b.updatable then b.current_sprite_index=1 else return b end end;if b.active_sprites<b.total_sprites then b.active_sprites=b.active_sprites+1 end;local g={}g.width=string.byte(a,1)<<8|string.byte(a,2)g.height=string.byte(a,3)<<8|string.byte(a,4)g.bpp=string.byte(a,5)g.num_colors=string.byte(a,6)g.palette_data=string.sub(a,7,7+g.num_colors*3-1)g.pixel_data=string.sub(a,7+g.num_colors*3)b.sprites[b.current_sprite_index]=g;return b end end;function _M.set_palette(h,i)local j={'VOID','WHITE','GREY','RED','PINK','DARKBROWN','BROWN','ORANGE','YELLOW','DARKGREEN','GREEN','LIGHTGREEN','NIGHTBLUE','SEABLUE','SKYBLUE','CLOUDBLUE'}for k=1,h do local l=(k-1)*3;frame.display.assign_color(j[k],string.byte(i,l+1),string.byte(i,l+2),string.byte(i,l+3))end end;return _M